INFO:     Will watch for changes in these directories: ['/Users/winstonyang/Desktop/Coding/Hackathons/Singhacks/apps/backend']
INFO:     Uvicorn running on http://0.0.0.0:8000 (Press CTRL+C to quit)
INFO:     Started reloader process [58110] using WatchFiles
INFO:     Started server process [58117]
INFO:     Waiting for application startup.
2025-10-27 23:10:55,517 INFO sqlalchemy.engine.Engine select pg_catalog.version()
2025-10-27 23:10:55,518 INFO sqlalchemy.engine.Engine [raw sql] {}
2025-10-27 23:10:55,535 INFO sqlalchemy.engine.Engine select current_schema()
2025-10-27 23:10:55,535 INFO sqlalchemy.engine.Engine [raw sql] {}
2025-10-27 23:10:55,554 INFO sqlalchemy.engine.Engine show standard_conforming_strings
2025-10-27 23:10:55,555 INFO sqlalchemy.engine.Engine [raw sql] {}
2025-10-27 23:10:55,571 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-10-27 23:10:55,575 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-10-27 23:10:55,575 INFO sqlalchemy.engine.Engine [generated in 0.00023s] {'table_name': 'users', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-10-27 23:10:55,594 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-10-27 23:10:55,594 INFO sqlalchemy.engine.Engine [cached since 0.01917s ago] {'table_name': 'travelers', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-10-27 23:10:55,602 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-10-27 23:10:55,602 INFO sqlalchemy.engine.Engine [cached since 0.0272s ago] {'table_name': 'trips', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-10-27 23:10:55,609 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-10-27 23:10:55,609 INFO sqlalchemy.engine.Engine [cached since 0.03384s ago] {'table_name': 'quotes', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-10-27 23:10:55,617 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-10-27 23:10:55,617 INFO sqlalchemy.engine.Engine [cached since 0.04154s ago] {'table_name': 'policies', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-10-27 23:10:55,625 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-10-27 23:10:55,625 INFO sqlalchemy.engine.Engine [cached since 0.04939s ago] {'table_name': 'claims', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-10-27 23:10:55,633 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-10-27 23:10:55,633 INFO sqlalchemy.engine.Engine [cached since 0.05755s ago] {'table_name': 'chat_history', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-10-27 23:10:55,640 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-10-27 23:10:55,640 INFO sqlalchemy.engine.Engine [cached since 0.06484s ago] {'table_name': 'audit_log', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-10-27 23:10:55,648 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-10-27 23:10:55,648 INFO sqlalchemy.engine.Engine [cached since 0.07262s ago] {'table_name': 'rag_documents', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-10-27 23:10:55,656 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_type.typname 
FROM pg_catalog.pg_type JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_type.typnamespace 
WHERE pg_catalog.pg_type.typname = %(typname_1)s AND pg_catalog.pg_type_is_visible(pg_catalog.pg_type.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-10-27 23:10:55,656 INFO sqlalchemy.engine.Engine [generated in 0.00008s] {'typname_1': 'producttype', 'nspname_1': 'pg_catalog'}
2025-10-27 23:10:55,662 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_type.typname 
FROM pg_catalog.pg_type JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_type.typnamespace 
WHERE pg_catalog.pg_type.typname = %(typname_1)s AND pg_catalog.pg_type_is_visible(pg_catalog.pg_type.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-10-27 23:10:55,662 INFO sqlalchemy.engine.Engine [cached since 0.005823s ago] {'typname_1': 'quotestatus', 'nspname_1': 'pg_catalog'}
2025-10-27 23:10:55,670 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_type.typname 
FROM pg_catalog.pg_type JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_type.typnamespace 
WHERE pg_catalog.pg_type.typname = %(typname_1)s AND pg_catalog.pg_type_is_visible(pg_catalog.pg_type.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-10-27 23:10:55,670 INFO sqlalchemy.engine.Engine [cached since 0.01323s ago] {'typname_1': 'policystatus', 'nspname_1': 'pg_catalog'}
2025-10-27 23:10:55,677 INFO sqlalchemy.engine.Engine COMMIT
INFO:     Application startup complete.
‚úì Database tables initialized
üöÄ ConvoTravelInsure v1.0.0 started
INFO:     127.0.0.1:58047 - "GET /health HTTP/1.1" 200 OK
INFO:     127.0.0.1:58068 - "POST /api/v1/chat/session HTTP/1.1" 200 OK
‚ö†Ô∏è  Checkpointing disabled for Phase 1 (will enable in Phase 2)
‚ö†Ô∏è  Checkpointing not available, using non-persistent mode

üí¨ Processing message for session 40946b97...
   User message: 'I need travel insurance for Japan. We are traveling from December 15, 2025 to De...'
üîÄ Routing #0: intent=quote
   confirmed=False, ready=False
   area=False, quote=False, complete=False
   ‚Üí needs_assessment
üîÄ Routing #0: intent=quote
   ‚Üí END (AI message added)
‚úÖ LangGraph execution complete
   State keys: ['messages', 'current_intent', 'confidence_score', 'trip_details', 'travelers_data', 'preferences', 'current_question', 'awaiting_confirmation', 'confirmation_received', '_loop_count', '_ready_for_pricing', '_pricing_complete']
   Agent response: 'When does your trip start? Please provide the date in YYYY-MM-DD format. For exa...'
INFO:     127.0.0.1:58107 - "POST /api/v1/chat/message HTTP/1.1" 200 OK
INFO:     127.0.0.1:58254 - "POST /api/v1/chat/session HTTP/1.1" 200 OK

üí¨ Processing message for session 43bb84f0...
   User message: 'I need travel insurance for Japan...'
üîÄ Routing #0: intent=quote
   confirmed=False, ready=False
   area=False, quote=False, complete=False
   ‚Üí needs_assessment
üîÄ Routing #0: intent=quote
   ‚Üí END (AI message added)
‚úÖ LangGraph execution complete
   State keys: ['messages', 'current_intent', 'confidence_score', 'trip_details', 'travelers_data', 'preferences', 'current_question', 'awaiting_confirmation', 'confirmation_received', '_loop_count', '_ready_for_pricing', '_pricing_complete']
   Agent response: 'When does your trip start? Please provide the date in YYYY-MM-DD format. For exa...'
INFO:     127.0.0.1:58289 - "POST /api/v1/chat/message HTTP/1.1" 200 OK

üí¨ Processing message for session 43bb84f0...
   User message: '2025-12-15...'
üîÄ Routing #0: intent=quote
   confirmed=False, ready=False
   area=False, quote=False, complete=False
   ‚Üí needs_assessment
üîÄ Routing #0: intent=quote
   ‚Üí END (AI message added)
‚úÖ LangGraph execution complete
   State keys: ['messages', 'current_intent', 'confidence_score', 'trip_details', 'travelers_data', 'preferences', 'awaiting_confirmation', 'confirmation_received', '_loop_count', '_ready_for_pricing', '_pricing_complete']
   Agent response: 'I'd be happy to help you with travel insurance! Where are you planning to travel...'
INFO:     127.0.0.1:58318 - "POST /api/v1/chat/message HTTP/1.1" 200 OK
INFO:     127.0.0.1:58365 - "POST /api/v1/chat/test HTTP/1.1" 200 OK
WARNING:  WatchFiles detected changes in 'app/agents/graph.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:     Finished server process [58117]
INFO:     Started server process [59363]
INFO:     Waiting for application startup.
2025-10-28 09:29:41,985 INFO sqlalchemy.engine.Engine select pg_catalog.version()
2025-10-28 09:29:41,985 INFO sqlalchemy.engine.Engine [raw sql] {}
2025-10-28 09:29:42,001 INFO sqlalchemy.engine.Engine select current_schema()
2025-10-28 09:29:42,001 INFO sqlalchemy.engine.Engine [raw sql] {}
2025-10-28 09:29:42,018 INFO sqlalchemy.engine.Engine show standard_conforming_strings
2025-10-28 09:29:42,019 INFO sqlalchemy.engine.Engine [raw sql] {}
2025-10-28 09:29:42,033 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-10-28 09:29:42,036 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-10-28 09:29:42,036 INFO sqlalchemy.engine.Engine [generated in 0.00017s] {'table_name': 'users', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-10-28 09:29:42,062 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-10-28 09:29:42,062 INFO sqlalchemy.engine.Engine [cached since 0.02571s ago] {'table_name': 'travelers', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-10-28 09:29:42,069 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-10-28 09:29:42,069 INFO sqlalchemy.engine.Engine [cached since 0.03282s ago] {'table_name': 'trips', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-10-28 09:29:42,077 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-10-28 09:29:42,077 INFO sqlalchemy.engine.Engine [cached since 0.0403s ago] {'table_name': 'quotes', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-10-28 09:29:42,084 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-10-28 09:29:42,084 INFO sqlalchemy.engine.Engine [cached since 0.04745s ago] {'table_name': 'policies', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-10-28 09:29:42,093 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-10-28 09:29:42,093 INFO sqlalchemy.engine.Engine [cached since 0.05655s ago] {'table_name': 'claims', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-10-28 09:29:42,104 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-10-28 09:29:42,104 INFO sqlalchemy.engine.Engine [cached since 0.06762s ago] {'table_name': 'chat_history', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-10-28 09:29:42,112 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-10-28 09:29:42,112 INFO sqlalchemy.engine.Engine [cached since 0.07576s ago] {'table_name': 'audit_log', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-10-28 09:29:42,120 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-10-28 09:29:42,120 INFO sqlalchemy.engine.Engine [cached since 0.08403s ago] {'table_name': 'rag_documents', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-10-28 09:29:42,129 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_type.typname 
FROM pg_catalog.pg_type JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_type.typnamespace 
WHERE pg_catalog.pg_type.typname = %(typname_1)s AND pg_catalog.pg_type_is_visible(pg_catalog.pg_type.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-10-28 09:29:42,129 INFO sqlalchemy.engine.Engine [generated in 0.00011s] {'typname_1': 'producttype', 'nspname_1': 'pg_catalog'}
2025-10-28 09:29:42,139 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_type.typname 
FROM pg_catalog.pg_type JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_type.typnamespace 
WHERE pg_catalog.pg_type.typname = %(typname_1)s AND pg_catalog.pg_type_is_visible(pg_catalog.pg_type.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-10-28 09:29:42,139 INFO sqlalchemy.engine.Engine [cached since 0.009554s ago] {'typname_1': 'quotestatus', 'nspname_1': 'pg_catalog'}
2025-10-28 09:29:42,148 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_type.typname 
FROM pg_catalog.pg_type JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_type.typnamespace 
WHERE pg_catalog.pg_type.typname = %(typname_1)s AND pg_catalog.pg_type_is_visible(pg_catalog.pg_type.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-10-28 09:29:42,148 INFO sqlalchemy.engine.Engine [cached since 0.01857s ago] {'typname_1': 'policystatus', 'nspname_1': 'pg_catalog'}
2025-10-28 09:29:42,155 INFO sqlalchemy.engine.Engine COMMIT
INFO:     Application startup complete.
‚úì Database tables initialized
üöÄ ConvoTravelInsure v1.0.0 started
INFO:     127.0.0.1:63158 - "GET /health HTTP/1.1" 200 OK
INFO:     127.0.0.1:63212 - "POST /api/v1/chat/session HTTP/1.1" 200 OK
Traceback (most recent call last):
  File "/Users/winstonyang/Desktop/Coding/Hackathons/Singhacks/apps/backend/app/routers/chat.py", line 108, in send_message
    result = graph.invoke(
        {"messages": [HumanMessage(content=request.message)]},
        config
    )
  File "/Users/winstonyang/Desktop/Coding/Hackathons/Singhacks/apps/backend/venv/lib/python3.13/site-packages/langgraph/pregel/__init__.py", line 1961, in invoke
    for chunk in self.stream(
                 ~~~~~~~~~~~^
        input,
        ^^^^^^
    ...<6 lines>...
        **kwargs,
        ^^^^^^^^^
    ):
    ^
  File "/Users/winstonyang/Desktop/Coding/Hackathons/Singhacks/apps/backend/venv/lib/python3.13/site-packages/langgraph/pregel/__init__.py", line 1614, in stream
    with SyncPregelLoop(
         ~~~~~~~~~~~~~~^
        input,
        ^^^^^^
    ...<11 lines>...
        debug=debug,
        ^^^^^^^^^^^^
    ) as loop:
    ^
  File "/Users/winstonyang/Desktop/Coding/Hackathons/Singhacks/apps/backend/venv/lib/python3.13/site-packages/langgraph/pregel/loop.py", line 896, in __enter__
    saved = self.checkpointer.get_tuple(self.checkpoint_config)
  File "/Users/winstonyang/Desktop/Coding/Hackathons/Singhacks/apps/backend/venv/lib/python3.13/site-packages/langgraph/checkpoint/postgres/__init__.py", line 226, in get_tuple
    with self._cursor() as cur:
         ~~~~~~~~~~~~^^
  File "/opt/homebrew/Cellar/python@3.13/3.13.7/Frameworks/Python.framework/Versions/3.13/lib/python3.13/contextlib.py", line 141, in __enter__
    return next(self.gen)
  File "/Users/winstonyang/Desktop/Coding/Hackathons/Singhacks/apps/backend/venv/lib/python3.13/site-packages/langgraph/checkpoint/postgres/__init__.py", line 427, in _cursor
    with conn.cursor(binary=True, row_factory=dict_row) as cur:
         ~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/winstonyang/Desktop/Coding/Hackathons/Singhacks/apps/backend/venv/lib/python3.13/site-packages/psycopg/connection.py", line 231, in cursor
    self._check_connection_ok()
    ~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/Users/winstonyang/Desktop/Coding/Hackathons/Singhacks/apps/backend/venv/lib/python3.13/site-packages/psycopg/_connection_base.py", line 528, in _check_connection_ok
    raise e.OperationalError("the connection is closed")
psycopg.OperationalError: the connection is closed
üì¶ Initializing PostgreSQL checkpointer...
   Connection: aws-1-ap-southeast-1.pooler.supabase.com:6543/postgres?sslmode=require
‚úÖ PostgreSQL checkpointing enabled (Phase 2)
‚úÖ Graph compiled with persistent checkpointing (SQLite)

üí¨ Processing message for session 1f32a961...
   User message: 'I need travel insurance for Japan...'
‚ùå LangGraph invocation error:
INFO:     127.0.0.1:63666 - "POST /api/v1/chat/message HTTP/1.1" 500 Internal Server Error
WARNING:  WatchFiles detected changes in 'app/agents/graph.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:     Finished server process [59363]
INFO:     Started server process [59779]
INFO:     Waiting for application startup.
2025-10-28 09:37:10,707 INFO sqlalchemy.engine.Engine select pg_catalog.version()
2025-10-28 09:37:10,707 INFO sqlalchemy.engine.Engine [raw sql] {}
2025-10-28 09:37:10,718 INFO sqlalchemy.engine.Engine select current_schema()
2025-10-28 09:37:10,718 INFO sqlalchemy.engine.Engine [raw sql] {}
2025-10-28 09:37:10,767 INFO sqlalchemy.engine.Engine show standard_conforming_strings
2025-10-28 09:37:10,767 INFO sqlalchemy.engine.Engine [raw sql] {}
2025-10-28 09:37:10,781 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-10-28 09:37:10,783 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-10-28 09:37:10,783 INFO sqlalchemy.engine.Engine [generated in 0.00014s] {'table_name': 'users', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-10-28 09:37:10,794 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-10-28 09:37:10,794 INFO sqlalchemy.engine.Engine [cached since 0.01137s ago] {'table_name': 'travelers', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-10-28 09:37:10,800 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-10-28 09:37:10,800 INFO sqlalchemy.engine.Engine [cached since 0.01735s ago] {'table_name': 'trips', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-10-28 09:37:10,806 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-10-28 09:37:10,806 INFO sqlalchemy.engine.Engine [cached since 0.02338s ago] {'table_name': 'quotes', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-10-28 09:37:10,813 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-10-28 09:37:10,813 INFO sqlalchemy.engine.Engine [cached since 0.02985s ago] {'table_name': 'policies', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-10-28 09:37:10,819 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-10-28 09:37:10,819 INFO sqlalchemy.engine.Engine [cached since 0.03631s ago] {'table_name': 'claims', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-10-28 09:37:10,824 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-10-28 09:37:10,824 INFO sqlalchemy.engine.Engine [cached since 0.04168s ago] {'table_name': 'chat_history', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-10-28 09:37:10,832 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-10-28 09:37:10,832 INFO sqlalchemy.engine.Engine [cached since 0.04942s ago] {'table_name': 'audit_log', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-10-28 09:37:10,838 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-10-28 09:37:10,838 INFO sqlalchemy.engine.Engine [cached since 0.05547s ago] {'table_name': 'rag_documents', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-10-28 09:37:10,846 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_type.typname 
FROM pg_catalog.pg_type JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_type.typnamespace 
WHERE pg_catalog.pg_type.typname = %(typname_1)s AND pg_catalog.pg_type_is_visible(pg_catalog.pg_type.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-10-28 09:37:10,846 INFO sqlalchemy.engine.Engine [generated in 0.00011s] {'typname_1': 'producttype', 'nspname_1': 'pg_catalog'}
2025-10-28 09:37:10,852 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_type.typname 
FROM pg_catalog.pg_type JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_type.typnamespace 
WHERE pg_catalog.pg_type.typname = %(typname_1)s AND pg_catalog.pg_type_is_visible(pg_catalog.pg_type.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-10-28 09:37:10,852 INFO sqlalchemy.engine.Engine [cached since 0.005883s ago] {'typname_1': 'quotestatus', 'nspname_1': 'pg_catalog'}
2025-10-28 09:37:10,858 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_type.typname 
FROM pg_catalog.pg_type JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_type.typnamespace 
WHERE pg_catalog.pg_type.typname = %(typname_1)s AND pg_catalog.pg_type_is_visible(pg_catalog.pg_type.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-10-28 09:37:10,858 INFO sqlalchemy.engine.Engine [cached since 0.01223s ago] {'typname_1': 'policystatus', 'nspname_1': 'pg_catalog'}
2025-10-28 09:37:10,865 INFO sqlalchemy.engine.Engine COMMIT
INFO:     Application startup complete.
‚úì Database tables initialized
üöÄ ConvoTravelInsure v1.0.0 started
INFO:     127.0.0.1:63856 - "GET /health HTTP/1.1" 200 OK
INFO:     127.0.0.1:63879 - "POST /api/v1/chat/session HTTP/1.1" 200 OK
Traceback (most recent call last):
  File "/Users/winstonyang/Desktop/Coding/Hackathons/Singhacks/apps/backend/app/routers/chat.py", line 108, in send_message
    result = graph.invoke(
        {"messages": [HumanMessage(content=request.message)]},
        config
    )
  File "/Users/winstonyang/Desktop/Coding/Hackathons/Singhacks/apps/backend/venv/lib/python3.13/site-packages/langgraph/pregel/__init__.py", line 1961, in invoke
    for chunk in self.stream(
                 ~~~~~~~~~~~^
        input,
        ^^^^^^
    ...<6 lines>...
        **kwargs,
        ^^^^^^^^^
    ):
    ^
  File "/Users/winstonyang/Desktop/Coding/Hackathons/Singhacks/apps/backend/venv/lib/python3.13/site-packages/langgraph/pregel/__init__.py", line 1614, in stream
    with SyncPregelLoop(
         ~~~~~~~~~~~~~~^
        input,
        ^^^^^^
    ...<11 lines>...
        debug=debug,
        ^^^^^^^^^^^^
    ) as loop:
    ^
  File "/Users/winstonyang/Desktop/Coding/Hackathons/Singhacks/apps/backend/venv/lib/python3.13/site-packages/langgraph/pregel/loop.py", line 896, in __enter__
    saved = self.checkpointer.get_tuple(self.checkpoint_config)
  File "/Users/winstonyang/Desktop/Coding/Hackathons/Singhacks/apps/backend/venv/lib/python3.13/site-packages/langgraph/checkpoint/postgres/__init__.py", line 227, in get_tuple
    cur.execute(
    ~~~~~~~~~~~^
        self.SELECT_SQL + where,
        ^^^^^^^^^^^^^^^^^^^^^^^^
        args,
        ^^^^^
    )
    ^
  File "/Users/winstonyang/Desktop/Coding/Hackathons/Singhacks/apps/backend/venv/lib/python3.13/site-packages/psycopg/cursor.py", line 97, in execute
    raise ex.with_traceback(None)
psycopg.errors.UndefinedTable: relation "checkpoints" does not exist
LINE 26: from checkpoints WHERE thread_id = $1 AND checkpoint_ns = $2...
              ^
üì¶ Initializing PostgreSQL checkpointer...
   Connection: aws-1-ap-southeast-1.pooler.supabase.com:6543/postgres?sslmode=require
‚úÖ PostgreSQL checkpointing enabled (Phase 2)
‚úÖ Graph compiled with persistent checkpointing (SQLite)

üí¨ Processing message for session 7dbf498c...
   User message: 'I need travel insurance for Japan...'
‚ùå LangGraph invocation error:
INFO:     127.0.0.1:50977 - "POST /api/v1/chat/message HTTP/1.1" 500 Internal Server Error
WARNING:  WatchFiles detected changes in 'app/agents/graph.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:     Finished server process [59779]
INFO:     Started server process [60926]
INFO:     Waiting for application startup.
2025-10-28 10:58:47,956 INFO sqlalchemy.engine.Engine select pg_catalog.version()
2025-10-28 10:58:47,956 INFO sqlalchemy.engine.Engine [raw sql] {}
2025-10-28 10:58:47,971 INFO sqlalchemy.engine.Engine select current_schema()
2025-10-28 10:58:47,971 INFO sqlalchemy.engine.Engine [raw sql] {}
2025-10-28 10:58:47,985 INFO sqlalchemy.engine.Engine show standard_conforming_strings
2025-10-28 10:58:47,985 INFO sqlalchemy.engine.Engine [raw sql] {}
2025-10-28 10:58:47,997 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-10-28 10:58:47,999 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-10-28 10:58:48,000 INFO sqlalchemy.engine.Engine [generated in 0.00014s] {'table_name': 'users', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-10-28 10:58:48,023 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-10-28 10:58:48,023 INFO sqlalchemy.engine.Engine [cached since 0.02398s ago] {'table_name': 'travelers', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-10-28 10:58:48,029 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-10-28 10:58:48,030 INFO sqlalchemy.engine.Engine [cached since 0.03013s ago] {'table_name': 'trips', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-10-28 10:58:48,036 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-10-28 10:58:48,036 INFO sqlalchemy.engine.Engine [cached since 0.03683s ago] {'table_name': 'quotes', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-10-28 10:58:48,047 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-10-28 10:58:48,047 INFO sqlalchemy.engine.Engine [cached since 0.04742s ago] {'table_name': 'policies', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-10-28 10:58:48,053 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-10-28 10:58:48,053 INFO sqlalchemy.engine.Engine [cached since 0.05396s ago] {'table_name': 'claims', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-10-28 10:58:48,064 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-10-28 10:58:48,064 INFO sqlalchemy.engine.Engine [cached since 0.06431s ago] {'table_name': 'chat_history', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-10-28 10:58:48,076 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-10-28 10:58:48,076 INFO sqlalchemy.engine.Engine [cached since 0.07658s ago] {'table_name': 'audit_log', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-10-28 10:58:48,083 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-10-28 10:58:48,083 INFO sqlalchemy.engine.Engine [cached since 0.08355s ago] {'table_name': 'rag_documents', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-10-28 10:58:48,090 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_type.typname 
FROM pg_catalog.pg_type JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_type.typnamespace 
WHERE pg_catalog.pg_type.typname = %(typname_1)s AND pg_catalog.pg_type_is_visible(pg_catalog.pg_type.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-10-28 10:58:48,090 INFO sqlalchemy.engine.Engine [generated in 0.00014s] {'typname_1': 'producttype', 'nspname_1': 'pg_catalog'}
2025-10-28 10:58:48,104 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_type.typname 
FROM pg_catalog.pg_type JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_type.typnamespace 
WHERE pg_catalog.pg_type.typname = %(typname_1)s AND pg_catalog.pg_type_is_visible(pg_catalog.pg_type.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-10-28 10:58:48,104 INFO sqlalchemy.engine.Engine [cached since 0.01405s ago] {'typname_1': 'quotestatus', 'nspname_1': 'pg_catalog'}
2025-10-28 10:58:48,120 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_type.typname 
FROM pg_catalog.pg_type JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_type.typnamespace 
WHERE pg_catalog.pg_type.typname = %(typname_1)s AND pg_catalog.pg_type_is_visible(pg_catalog.pg_type.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-10-28 10:58:48,120 INFO sqlalchemy.engine.Engine [cached since 0.03007s ago] {'typname_1': 'policystatus', 'nspname_1': 'pg_catalog'}
2025-10-28 10:58:48,129 INFO sqlalchemy.engine.Engine COMMIT
INFO:     Application startup complete.
‚úì Database tables initialized
üöÄ ConvoTravelInsure v1.0.0 started
INFO:     127.0.0.1:51443 - "GET /health HTTP/1.1" 200 OK
INFO:     127.0.0.1:51463 - "POST /api/v1/chat/session HTTP/1.1" 200 OK
Traceback (most recent call last):
  File "/Users/winstonyang/Desktop/Coding/Hackathons/Singhacks/apps/backend/app/routers/chat.py", line 108, in send_message
    result = graph.invoke(
        {"messages": [HumanMessage(content=request.message)]},
        config
    )
  File "/Users/winstonyang/Desktop/Coding/Hackathons/Singhacks/apps/backend/venv/lib/python3.13/site-packages/langgraph/pregel/__init__.py", line 1961, in invoke
    for chunk in self.stream(
                 ~~~~~~~~~~~^
        input,
        ^^^^^^
    ...<6 lines>...
        **kwargs,
        ^^^^^^^^^
    ):
    ^
  File "/Users/winstonyang/Desktop/Coding/Hackathons/Singhacks/apps/backend/venv/lib/python3.13/site-packages/langgraph/pregel/__init__.py", line 1614, in stream
    with SyncPregelLoop(
         ~~~~~~~~~~~~~~^
        input,
        ^^^^^^
    ...<11 lines>...
        debug=debug,
        ^^^^^^^^^^^^
    ) as loop:
    ^
  File "/Users/winstonyang/Desktop/Coding/Hackathons/Singhacks/apps/backend/venv/lib/python3.13/site-packages/langgraph/pregel/loop.py", line 896, in __enter__
    saved = self.checkpointer.get_tuple(self.checkpoint_config)
  File "/Users/winstonyang/Desktop/Coding/Hackathons/Singhacks/apps/backend/venv/lib/python3.13/site-packages/langgraph/checkpoint/postgres/__init__.py", line 227, in get_tuple
    cur.execute(
    ~~~~~~~~~~~^
        self.SELECT_SQL + where,
        ^^^^^^^^^^^^^^^^^^^^^^^^
        args,
        ^^^^^
    )
    ^
  File "/Users/winstonyang/Desktop/Coding/Hackathons/Singhacks/apps/backend/venv/lib/python3.13/site-packages/psycopg/cursor.py", line 97, in execute
    raise ex.with_traceback(None)
psycopg.errors.DuplicatePreparedStatement: prepared statement "_pg3_0" already exists
üì¶ Initializing PostgreSQL checkpointer...
   Connection: aws-1-ap-southeast-1.pooler.supabase.com:6543/postgres?sslmode=require
   ‚úì Checkpoint tables verified/created
‚úÖ PostgreSQL checkpointing enabled (Phase 2)
‚úÖ Graph compiled with persistent checkpointing (SQLite)

üí¨ Processing message for session 58998a24...
   User message: 'I need travel insurance for Japan...'
‚ùå LangGraph invocation error:
INFO:     127.0.0.1:51494 - "POST /api/v1/chat/message HTTP/1.1" 500 Internal Server Error
WARNING:  WatchFiles detected changes in 'app/agents/graph.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:     Finished server process [60926]
INFO:     Started server process [61096]
INFO:     Waiting for application startup.
2025-10-28 10:59:47,127 INFO sqlalchemy.engine.Engine select pg_catalog.version()
2025-10-28 10:59:47,127 INFO sqlalchemy.engine.Engine [raw sql] {}
2025-10-28 10:59:47,142 INFO sqlalchemy.engine.Engine select current_schema()
2025-10-28 10:59:47,142 INFO sqlalchemy.engine.Engine [raw sql] {}
2025-10-28 10:59:47,155 INFO sqlalchemy.engine.Engine show standard_conforming_strings
2025-10-28 10:59:47,155 INFO sqlalchemy.engine.Engine [raw sql] {}
2025-10-28 10:59:47,172 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2025-10-28 10:59:47,173 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-10-28 10:59:47,173 INFO sqlalchemy.engine.Engine [generated in 0.00008s] {'table_name': 'users', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-10-28 10:59:47,187 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-10-28 10:59:47,187 INFO sqlalchemy.engine.Engine [cached since 0.0134s ago] {'table_name': 'travelers', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-10-28 10:59:47,193 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-10-28 10:59:47,193 INFO sqlalchemy.engine.Engine [cached since 0.01944s ago] {'table_name': 'trips', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-10-28 10:59:47,209 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-10-28 10:59:47,209 INFO sqlalchemy.engine.Engine [cached since 0.03571s ago] {'table_name': 'quotes', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-10-28 10:59:47,215 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-10-28 10:59:47,216 INFO sqlalchemy.engine.Engine [cached since 0.04221s ago] {'table_name': 'policies', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-10-28 10:59:47,225 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-10-28 10:59:47,225 INFO sqlalchemy.engine.Engine [cached since 0.05176s ago] {'table_name': 'claims', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-10-28 10:59:47,246 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-10-28 10:59:47,246 INFO sqlalchemy.engine.Engine [cached since 0.07263s ago] {'table_name': 'chat_history', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-10-28 10:59:47,254 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-10-28 10:59:47,254 INFO sqlalchemy.engine.Engine [cached since 0.08048s ago] {'table_name': 'audit_log', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-10-28 10:59:47,314 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_class.relname 
FROM pg_catalog.pg_class JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_class.relnamespace 
WHERE pg_catalog.pg_class.relname = %(table_name)s AND pg_catalog.pg_class.relkind = ANY (ARRAY[%(param_1)s, %(param_2)s, %(param_3)s, %(param_4)s, %(param_5)s]) AND pg_catalog.pg_table_is_visible(pg_catalog.pg_class.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-10-28 10:59:47,314 INFO sqlalchemy.engine.Engine [cached since 0.1411s ago] {'table_name': 'rag_documents', 'param_1': 'r', 'param_2': 'p', 'param_3': 'f', 'param_4': 'v', 'param_5': 'm', 'nspname_1': 'pg_catalog'}
2025-10-28 10:59:47,326 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_type.typname 
FROM pg_catalog.pg_type JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_type.typnamespace 
WHERE pg_catalog.pg_type.typname = %(typname_1)s AND pg_catalog.pg_type_is_visible(pg_catalog.pg_type.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-10-28 10:59:47,326 INFO sqlalchemy.engine.Engine [generated in 0.00023s] {'typname_1': 'producttype', 'nspname_1': 'pg_catalog'}
2025-10-28 10:59:47,334 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_type.typname 
FROM pg_catalog.pg_type JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_type.typnamespace 
WHERE pg_catalog.pg_type.typname = %(typname_1)s AND pg_catalog.pg_type_is_visible(pg_catalog.pg_type.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-10-28 10:59:47,334 INFO sqlalchemy.engine.Engine [cached since 0.007663s ago] {'typname_1': 'quotestatus', 'nspname_1': 'pg_catalog'}
2025-10-28 10:59:47,346 INFO sqlalchemy.engine.Engine SELECT pg_catalog.pg_type.typname 
FROM pg_catalog.pg_type JOIN pg_catalog.pg_namespace ON pg_catalog.pg_namespace.oid = pg_catalog.pg_type.typnamespace 
WHERE pg_catalog.pg_type.typname = %(typname_1)s AND pg_catalog.pg_type_is_visible(pg_catalog.pg_type.oid) AND pg_catalog.pg_namespace.nspname != %(nspname_1)s
2025-10-28 10:59:47,346 INFO sqlalchemy.engine.Engine [cached since 0.01966s ago] {'typname_1': 'policystatus', 'nspname_1': 'pg_catalog'}
2025-10-28 10:59:47,354 INFO sqlalchemy.engine.Engine COMMIT
INFO:     Application startup complete.
‚úì Database tables initialized
üöÄ ConvoTravelInsure v1.0.0 started
INFO:     127.0.0.1:51578 - "GET /health HTTP/1.1" 200 OK
INFO:     127.0.0.1:51600 - "POST /api/v1/chat/session HTTP/1.1" 200 OK
Traceback (most recent call last):
  File "/Users/winstonyang/Desktop/Coding/Hackathons/Singhacks/apps/backend/app/agents/graph.py", line 70, in get_or_create_checkpointer
    with PostgresSaver.from_conn_string(conn_string) as checkpointer:
         ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
  File "/opt/homebrew/Cellar/python@3.13/3.13.7/Frameworks/Python.framework/Versions/3.13/lib/python3.13/contextlib.py", line 141, in __enter__
    return next(self.gen)
  File "/Users/winstonyang/Desktop/Coding/Hackathons/Singhacks/apps/backend/venv/lib/python3.13/site-packages/langgraph/checkpoint/postgres/__init__.py", line 68, in from_conn_string
    with Connection.connect(
         ~~~~~~~~~~~~~~~~~~^
        conn_string, autocommit=True, prepare_threshold=0, row_factory=dict_row
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ) as conn:
    ^
  File "/Users/winstonyang/Desktop/Coding/Hackathons/Singhacks/apps/backend/venv/lib/python3.13/site-packages/psycopg/connection.py", line 95, in connect
    params = cls._get_connection_params(conninfo, **kwargs)
  File "/Users/winstonyang/Desktop/Coding/Hackathons/Singhacks/apps/backend/venv/lib/python3.13/site-packages/psycopg/connection.py", line 178, in _get_connection_params
    return conninfo_to_dict(conninfo, **kwargs)
  File "/Users/winstonyang/Desktop/Coding/Hackathons/Singhacks/apps/backend/venv/lib/python3.13/site-packages/psycopg/conninfo.py", line 82, in conninfo_to_dict
    opts = _parse_conninfo(conninfo)
  File "/Users/winstonyang/Desktop/Coding/Hackathons/Singhacks/apps/backend/venv/lib/python3.13/site-packages/psycopg/conninfo.py", line 103, in _parse_conninfo
    raise e.ProgrammingError(str(ex)) from None
psycopg.ProgrammingError: invalid URI query parameter: "prepare_threshold"

üì¶ Initializing PostgreSQL checkpointer...
   Connection: aws-1-ap-southeast-1.pooler.supabase.com:6543/postgres
‚ö†Ô∏è  PostgreSQL checkpointing failed: invalid URI query parameter: "prepare_threshold"

   Falling back to stateless mode
‚ö†Ô∏è  Checkpointing not available, using non-persistent mode

üí¨ Processing message for session d5cf029a...
   User message: 'I need travel insurance for Japan...'
üîÄ Routing #0: intent=quote
   confirmed=False, ready=False
   area=False, quote=False, complete=False
   ‚Üí needs_assessment
üîÄ Routing #0: intent=quote
   ‚Üí END (AI message added)
‚úÖ LangGraph execution complete
   State keys: ['messages', 'current_intent', 'confidence_score', 'trip_details', 'travelers_data', 'preferences', 'current_question', 'awaiting_confirmation', 'confirmation_received', '_loop_count', '_ready_for_pricing', '_pricing_complete']
   Agent response: 'When does your trip start? Please provide the date in YYYY-MM-DD format. For exa...'
INFO:     127.0.0.1:56243 - "POST /api/v1/chat/message HTTP/1.1" 200 OK

üí¨ Processing message for session d5cf029a...
   User message: '2025-12-15...'
üîÄ Routing #0: intent=quote
   confirmed=False, ready=False
   area=False, quote=False, complete=False
   ‚Üí needs_assessment
üîÄ Routing #0: intent=quote
   ‚Üí END (AI message added)
‚úÖ LangGraph execution complete
   State keys: ['messages', 'current_intent', 'confidence_score', 'trip_details', 'travelers_data', 'preferences', 'awaiting_confirmation', 'confirmation_received', '_loop_count', '_ready_for_pricing', '_pricing_complete']
   Agent response: 'I'd be happy to help you with travel insurance! Where are you planning to travel...'
INFO:     127.0.0.1:56850 - "POST /api/v1/chat/message HTTP/1.1" 200 OK
WARNING:  WatchFiles detected changes in 'app/agents/graph.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:     Finished server process [61096]
INFO:     Started server process [63694]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
‚ö†Ô∏è  Database connection failed (will retry on first request): (psycopg2.OperationalError) connection to server at "aws-1-ap-southeast-1.pooler.supabase.com" (13.2
   Server will continue - chat will work without persistence
üöÄ ConvoTravelInsure v1.0.0 started
INFO:     127.0.0.1:58180 - "GET /health HTTP/1.1" 200 OK
INFO:     127.0.0.1:58202 - "POST /api/v1/chat/session HTTP/1.1" 200 OK
üì¶ Initializing PostgreSQL checkpointer (using session pooler)...
   Connection: aws-1-ap-southeast-1.pooler.supabase.com:5432/postgres
   ‚úì Checkpoint tables verified/created
‚úÖ PostgreSQL checkpointing enabled (Phase 2)
‚úÖ Graph compiled with persistent checkpointing (SQLite)

üí¨ Processing message for session a81f5ff9...
   User message: 'I need travel insurance for Japan...'
üîÄ Routing #0: intent=quote
   confirmed=False, ready=False
   area=False, quote=False, complete=False
   ‚Üí needs_assessment
üîÄ Routing #0: intent=quote
   ‚Üí END (AI message added)
‚úÖ LangGraph execution complete
   State keys: ['messages', 'current_intent', 'confidence_score', 'trip_details', 'travelers_data', 'preferences', 'current_question', 'awaiting_confirmation', 'confirmation_received', '_loop_count', '_ready_for_pricing', '_pricing_complete']
   Agent response: 'When does your trip start? Please provide the date in YYYY-MM-DD format. For exa...'
INFO:     127.0.0.1:58343 - "POST /api/v1/chat/message HTTP/1.1" 200 OK

üí¨ Processing message for session a81f5ff9...
   User message: '2025-12-15...'
üîÄ Routing #0: intent=quote
   confirmed=False, ready=False
   area=False, quote=False, complete=False
   ‚Üí needs_assessment
üîÄ Routing #0: intent=quote
   ‚Üí END (AI message added)
‚úÖ LangGraph execution complete
   State keys: ['messages', 'current_intent', 'confidence_score', 'trip_details', 'travelers_data', 'preferences', 'current_question', 'awaiting_confirmation', 'confirmation_received', '_loop_count', '_ready_for_pricing', '_pricing_complete']
   Agent response: 'When does your trip start? Please provide the date in YYYY-MM-DD format. For exa...'
INFO:     127.0.0.1:58416 - "POST /api/v1/chat/message HTTP/1.1" 200 OK
